<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="portal_layout_contract" name="Portal Contract: contract menu entry" inherit_id="portal.portal_layout" priority="40">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-if="page_name == 'contract' or contract">
                <a t-if="contract" t-attf-href="/my/contracts?{{ keep_query() }}">Contracts</a>
                <t t-else="">Contracts</t>
            </li>
            <li t-if="contract">
                <t t-esc="contract.name"/>
            </li>
        </xpath>
    </template>
    
    <template id="portal_my_contract" name="Portal My Contract: project entries" inherit_id="portal.portal_my_home" priority="40">
        <xpath expr="//ul[hasclass('o_portal_docs')]" position="inside">
            <t t-if="request.env['res.users'].browse(request.session.uid).user_has_groups('odoo_portal_contract_employee.group_employee_contract')">
                <li t-if="payslip_count" class="list-group-item">
                    <span class="badge" t-esc="contract_count"/>
                    <a href="/my/contracts">Contracts</a>
                </li>
            </t>
        </xpath>
    </template>
    
    <template id="portal_my_contracts" name="My Contracts">
        <t t-call="portal.portal_layout">
            <h3>Contracts
                <t t-call="portal.portal_searchbar"/>
            </h3>
            <t t-if="not contracts">
                <div class="alert alert-warning mt8" role="alert">
                    There are no contracts.
                </div>
            </t>
            <div t-if="contracts" class="panel panel-default">
                <div class="table-responsive"><table class="table table-hover o_portal_my_doc_table">
                    <thead>
                        <tr class="active">
                        <th>Contract Reference</th>
                        <th>Contract Type</th>
                        <th>Job Title</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Print</th>
                  </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="contracts" t-as="contract">
                    <tr>
                        <td>
                            <span t-field="contract.name"/>
                        </td>
                        <td>
                            <span t-field="contract.type_id.name"/>
                        </td>
                        <td>
                            <span t-field="contract.job_id.name"/>
                        </td>
                        <td>
                            <span t-field="contract.date_start"/>
                        </td>
                        <td>
                            <span t-field="contract.date_end"/>
                        </td>
                        <td>
                            <a class="btn btn-xs btn-primary" t-attf-href="/my/contract/#{contract.id}">Print</a>
                        </td>
                    </tr>
                </t>
                    </tbody>
                </table></div>
            </div>
            <div t-if="pager" class="o_portal_pager text-center">
                <t t-call="portal.pager"/>
            </div>
        </t>
    </template>

</odoo>
